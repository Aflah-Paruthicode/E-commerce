<%- include('../layouts/header.ejs') %>
<link rel="stylesheet" href="/css/userCss/userProffile.css" />

<div class="profile-wrapper">
  <aside class="profile-sidebar">
    <div class="user-greeting">
      <img src="/userProfileImages/user (1).png" alt="User" />
      <div>
        <small class="text-muted">Hello,</small>
        <h2><%= uSER.name %></h2>
      </div>
    </div>

    <nav class="nav-menu">
      <a href="/profile" class="nav-item-link active"> <i class="fa-solid fa-gauge"></i> Account Overview </a>
      <a href="/myOrders" class="nav-item-link"> <i class="fa-solid fa-box"></i> My Orders </a>
      <a href="/manageAddress" class="nav-item-link"> <i class="fa-solid fa-map-location-dot"></i> Manage Addresses </a>
      <a href="/whishlist" class="nav-item-link"> <i class="fa-solid fa-heart"></i> My Wishlist </a>
      <a href="/wallet" class="nav-item-link"> <i class="fa-solid fa-wallet"></i> Wallet </a>
      <a href="/logout" class="nav-item-link text-danger"> <i class="fa-solid fa-right-from-bracket"></i> Logout </a>
    </nav>
  </aside>

  <main class="profile-content">
    <div class="profile-header-main">
      <img src="/userProfileImages/user (1).png" class="avatar-large" alt="Profile" />
      <h3 class="fw-bold mb-1"><%= uSER.name %></h3>
      <p class="text-muted mb-4"><%= uSER.email %></p>
      <a href="/editUser/?<%= uSER._id %>" class="btn-edit-profile"> <i class="fa-regular fa-pen-to-square me-2"></i> Edit Profile </a>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <h6>Total Orders</h6>
        <span><%= ordersCount %></span>
      </div>
      <div class="stat-card">
        <h6>Wallet Balance</h6>
        <span>â‚¹<%= wallet.Money %></span>
      </div>
      <div class="stat-card">
        <h6>Wishlist Items</h6>
        <span><%= wishCount %></span>
      </div>
    </div>

    <div class="mt-5 p-4 border rounded-3 bg-light">
      <h5 class="fw-bold mb-3">Security Tip</h5>
      <p class="small text-muted mb-0">
        Ensure your account is secure by using a strong password. If you suspect any unusual activity, change your password immediately in the edit profile
        section.
      </p>
    </div>
  </main>
</div>

<%- include('../layouts/footer.ejs') %>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<% if(locals.message) { %>
<script>
  Swal.fire({
    title: "Success!",
    text: "<%= message %>",
    icon: "success",
    confirmButtonColor: "#1a1a1a",
  }).then(() => {
    window.location.href = "/profile";
  });
</script>
<% } %>
